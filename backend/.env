# ===========================================
# CONFIGURAÇÃO DE AMBIENTE - NOVOPROTOCOLO
# ===========================================

# Ambiente de execução
NODE_ENV=development
PORT=3001
BYPASS_RATE_LIMIT=true

# ===========================================
# ORACLE DATABASE CONFIGURATION
# ===========================================
# Baseado na configuração da imagem fornecida

# Credenciais do banco - USUÁRIO DEDICADO PROTOCOLO em localhost
#DB_USER=protocolo_user
#DB_PASSWORD=

#DB_CONNECT_STRING=localhost:1521/FREEPDB1

# Configurações específicas da conexão Oracle
#DB_HOST=localhost
#DB_PORT=1521
#DB_SERVICE_NAME=FREEPDB1
#DB_SID=FREEPDB1


# Credenciais do banco - USUÁRIO DEDICADO PROTOCOLO em "nuvem"
DB_USER=protocolo
DB_PASSWORD=P56$etrw&

DB_CONNECT_STRING=cdbsfz-vip:1521/prothm.sefaz.to.gov.br

# Configurações específicas da conexão Oracle
DB_HOST=cdbsfz-vip
DB_PORT=1521
DB_SERVICE_NAME=prothm.sefaz.to.gov.br
DB_SID=

# ========================================
# INSTRUÇÕES PARA TESTAR AS TABELAS ORACLE
# ========================================
#
# 1. Configure suas credenciais Oracle acima
# 2. Copie este arquivo para .env (sem .example)
# 3. Inicie o servidor: npm run dev
# 4. Teste os endpoints:
#
#    VERIFICAR SE AS TABELAS EXISTEM:
#    GET http://localhost:3001/api/database/check-tables
#
#    CRIAR AS TABELAS (se não existirem):
#    POST http://localhost:3001/api/database/create-tables
#
#    HEALTH CHECK:
#    GET http://localhost:3001/api/health
#
# 5. Use um cliente REST como Postman, Insomnia ou curl:
#    curl http://localhost:3001/api/database/check-tables
#
# ========================================

# ===========================================
# OPENROUTESERVICE API CONFIGURATION
# ===========================================
# Para obter uma chave gratuita:
# 1. Acesse https://openrouteservice.org/
# 2. Clique em "Sign Up" para criar uma conta
# 3. Confirme seu email
# 4. Acesse o Dashboard e gere uma API key
# 5. Substitua a chave abaixo pela sua chave pessoal

# Chave de API válida para OpenRouteService
OPENROUTESERVICE_API_KEY=eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6IjIxMWJlMDUzNzZlNzRlZDNiNjRhYzVkNTNlMDI0NjAzIiwiaCI6Im11cm11cjY0In0=

# Pool de conexões
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_INCREMENT=1
DB_POOL_TIMEOUT=60

# Configurações adicionais Oracle
DB_EDITION=
DB_EVENTS=false
DB_EXTERNAL_AUTH=false
DB_HOMOGENEOUS=true
DB_QUEUE_TIMEOUT=60000

# ===========================================
# AUTENTICAÇÃO E SEGURANÇA
# ===========================================

# JWT Configuration
# Gerado por : node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=2cf7bbc0a459296097d6b2ea1c70661ea6df061db9d50826398c2b640df5337974137d0950f0aff635fb299401a9cba16ed4c815524da580d117aec6b51a5eac
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Bcrypt rounds (10-12 recomendado)
BCRYPT_ROUNDS=10

# ===========================================
# UPLOAD DE ARQUIVOS
# ===========================================

# Diretório de uploads
UPLOAD_DIR=./uploads
UPLOAD_TEMP_DIR=./uploads/temp

# Limites de arquivo (em bytes)
MAX_FILE_SIZE=10485760
MAX_FILES_PER_REQUEST=5

# Tipos de arquivo permitidos
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,jpg,jpeg,png,gif,txt,zip,rar

# ===========================================
# CORS E SEGURANÇA
# ===========================================

# Origins permitidas (separadas por vírgula)
CORS_ORIGIN=http://localhost:8081,http://localhost:8082,http://localhost:3000,http://10.9.1.95:8080,http://10.9.1.95:3001

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# LOGGING
# ===========================================

# Nível de log (error, warn, info, debug)
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# ===========================================
# EMAIL (OPCIONAL)
# ===========================================

# Configuração SMTP para notificações
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@novoprotocolo.com

# ===========================================
# CACHE (OPCIONAL)
# ===========================================

# Redis para cache (se disponível)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Cache TTL em segundos
CACHE_TTL=3600

# ===========================================
# MONITORAMENTO
# ===========================================

# Health check
HEALTH_CHECK_INTERVAL=30000

# Métricas
METRICS_ENABLED=true
METRICS_PORT=9090

# ===========================================
# DESENVOLVIMENTO
# ===========================================

# Debug
DEBUG=novoprotocolo:*

# Swagger/OpenAPI
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs

# ===========================================
# PRODUÇÃO
# ===========================================

# SSL/TLS (para produção)
SSL_ENABLED=false
SSL_KEY_PATH=
SSL_CERT_PATH=

# Cluster mode
CLUSTER_ENABLED=false
CLUSTER_WORKERS=0

# ===========================================
# BACKUP E MANUTENÇÃO
# ===========================================

# Backup automático
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# Limpeza de arquivos temporários
CLEANUP_TEMP_FILES=true
CLEANUP_INTERVAL=3600000

# ===========================================
# INTEGRAÇÃO COM FRONTEND
# ===========================================

# URLs do frontend
FRONTEND_URL=http://localhost:8081
FRONTEND_ADMIN_URL=http://localhost:8082

# Webhook endpoints (se necessário)
WEBHOOK_SECRET=
WEBHOOK_TIMEOUT=5000

# ===========================================
# CONFIGURAÇÕES ESPECÍFICAS DO ORACLE
# ===========================================

# Oracle Instant Client (se necessário especificar caminho)
# ORACLE_CLIENT_LIB_DIR=C:\oracle\instantclient_21_3

# Configurações de sessão Oracle
ORACLE_SESSION_TIMEZONE=America/Sao_Paulo
ORACLE_DATE_FORMAT=DD/MM/YYYY HH24:MI:SS
ORACLE_TIMESTAMP_FORMAT=DD/MM/YYYY HH24:MI:SS.FF

# Configurações de performance
ORACLE_PREFETCH_ROWS=100
ORACLE_MAX_ROWS=1000

# ===========================================
# NOTAS DE CONFIGURAÇÃO
# ===========================================

# 1. Copie este arquivo para .env e ajuste os valores
# 2. NUNCA commite o arquivo .env no Git
# 3. Em produção, use variáveis de ambiente do sistema
# 4. Mantenha senhas e secrets seguros
# 5. Teste todas as configurações antes do deploy

# ===========================================
# COMANDOS ÚTEIS
# ===========================================

# Testar conexão Oracle:
# npm run test:db

# Executar migrações:
# npm run migrate

# Iniciar em modo desenvolvimento:
# npm run dev

# Build para produção:
# npm run build && npm start