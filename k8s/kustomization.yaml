apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: novoprotocolo
  namespace: novoprotocolo

# Namespace
namespace: novoprotocolo

# Recursos a serem aplicados
resources:
  - namespace.yaml
  - configmap.yaml
  - secrets.yaml
  - oracle-deployment.yaml
  - backend-deployment.yaml
  - frontend-deployment.yaml
  - ingress.yaml

# Labels comuns para todos os recursos
commonLabels:
  app: novoprotocolo
  version: v1.0.0
  managed-by: kustomize

# Anotações comuns
commonAnnotations:
  description: "Sistema NovoProtocolo - Gestão de Protocolos SEFAZ-TO"
  maintainer: "NovoProtocolo Team"

# Imagens a serem substituídas
images:
  - name: novoprotocolo/backend
    newTag: latest
  - name: novoprotocolo/frontend
    newTag: latest

# Patches para diferentes ambientes
patchesStrategicMerge:
  - patches/production.yaml

# Configurações específicas por ambiente
configurations:
  - kustomizeconfig.yaml